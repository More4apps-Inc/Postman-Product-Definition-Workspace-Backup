{"collection":{"info":{"_postman_id":"6bb04b27-7bca-45cd-843c-13ceb8877b7d","name":"M4AServlet - my copy","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json","updatedAt":"2022-06-28T02:41:06.000Z","createdAt":"2019-08-09T01:07:22.000Z","lastUpdatedBy":"2333627","uid":"2333627-6bb04b27-7bca-45cd-843c-13ceb8877b7d"},"item":[{"name":"R12","item":[{"name":"Base64","item":[{"name":"runSql-Base64","event":[{"listen":"prerequest","script":{"id":"8e1b892b-d0e7-4be3-8fab-7f71c2705e7d","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"925e0b96-ce82-4a08-a97c-237b3645f243","exec":["tests[\"Status code is 200\"] = responseCode.code === 200;","","","","var jsonObject = xml2Json(responseBody);","console.log(jsonObject);","console.log(JSON.stringify(jsonObject));","","pm.test(\"Body matches string\", function () {","    pm.expect(pm.response.text()).to.include(\"<NLS_NUMERIC_CHARACTERS>.,</NLS_NUMERIC_CHARACTERS>\");","    pm.expect(pm.response.text()).to.include(\"<USER_NAME>DEFAULTLANG</USER_NAME>\");","});"],"type":"text/javascript"}}],"id":"6d2c6c75-de1d-46ad-b320-644b4f5aef99","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_sql","value":"c2VsZWN0IFRCTF9JTkRFWCwgTElORV9DT05URU5UIGZyb20gYWtfbG9hZGVyX3RlbXA==","type":"text"},{"key":"p_init","value":"YmVnaW4NCiBkZWxldGUgZnJvbSBha19sb2FkZXJfdGVtcDsNCiAgSU5TRVJUIElOVE8gYWtfbG9hZGVyX3RlbXAoVEJMX0lOREVYLCBMSU5FX0NPTlRFTlQpIFZBTFVFUyAoMSwgJ3Rlc3QgcnVuIHNxbCBzdGF0ZW1lbnQgZnJvbSBwb3N0bWFuJyk7IA0KZW5kOw==","type":"text"},{"key":"p_base64","value":"Y","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/sql","host":["{{base_servlet_url}}"],"path":["sql"]}},"response":[],"uid":"2333627-6d2c6c75-de1d-46ad-b320-644b4f5aef99"},{"name":"runPLSQLBlock-Base64","event":[{"listen":"prerequest","script":{"id":"8e1b892b-d0e7-4be3-8fab-7f71c2705e7d","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"925e0b96-ce82-4a08-a97c-237b3645f243","exec":[""],"type":"text/javascript"}}],"id":"6d3fe3e9-63d4-4a75-b649-e247e736ea15","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_block","value":"YmVnaW4NCiBkZWxldGUgZnJvbSBha19sb2FkZXJfdGVtcDsNCiAgSU5TRVJUIElOVE8gYWtfbG9hZGVyX3RlbXAoVEJMX0lOREVYLCBMSU5FX0NPTlRFTlQpIFZBTFVFUyAoMSwgJ3Rlc3QgcnVuIHBsc3FsIGJsb2NrIGZyb20gcG9zdG1hbicpOyANCmVuZDs=","type":"text"},{"key":"p_custom_select","value":"c2VsZWN0IFRCTF9JTkRFWCwgTElORV9DT05URU5UIGZyb20gYWtfbG9hZGVyX3RlbXA=","type":"text"},{"key":"p_base64","value":"Y","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/block","host":["{{base_servlet_url}}"],"path":["block"]}},"response":[],"uid":"2333627-6d3fe3e9-63d4-4a75-b649-e247e736ea15"},{"name":"StateSteps-Base64","event":[{"listen":"prerequest","script":{"id":"8972fa11-8f10-4958-a70f-029a4f586806","exec":[" request = {\r","                //url: pm.environment.get(\"baseurl\") + \"m4aServlet/sql\",\r","\r","                url: pm.environment.get(\"urlprefix\") + pm.environment.get(\"hostname\") + \".more4apps.com:\" + pm.environment.get(\"port\") +  \"/OA_HTML/m4aServlet/sql\",\r","                method: \"POST\",\r","                header: {'Content-Type': 'application/x-www-form-urlencoded'},\r","                body: {\r","                    mode: 'urlencoded',\r","          urlencoded: [{key: \"p_sql\", value: \"SELECT ad_sessions_s.nextval a from dual\", disabled: false}]}\r"," }\r"," \r"," pm.sendRequest(request, function (err, res) {\r","     var jsonResponse = xml2Json(res.text());\r","     console.log (jsonResponse.ROWSET.ROW.A);\r","        pm.environment.set(\"block_session_id\", jsonResponse.ROWSET.ROW.A);\r","        console.log ('block_session_id===' + pm.environment.get(\"block_session_id\"));\r"," })\r"," "],"type":"text/javascript"}},{"listen":"test","script":{"id":"823d6e65-66bf-40f8-8c2f-1c08ac3aa716","exec":["//console.log('body===' + JSON.stringify( xml2Json(responseBody).ROWSET.ROW.DONE));",""],"type":"text/javascript"}}],"id":"7a7f7f35-0a61-47df-8705-9bbd83fe6e63","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","value":"application/x-www-form-urlencoded","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_session","value":"{{block_session_id}}","type":"text"},{"key":"p_block","value":"YmVnaW4gYmVnaW4gZGVsZXRlIGZyb20gYWtfbG9hZGVyX3RlbXA7IGluc2VydCBpbnRvIGFrX2xvYWRlcl90ZW1wIFZBTFVFUyAoOCwgJ0xJTFknLCAxKTsgZW5kOyBiZWdpbiBkZWxldGUgZnJvbSBha19sb2FkZXJfdGVtcDsgaW5zZXJ0IGludG8gYWtfbG9hZGVyX3RlbXAgVkFMVUVTICg5LCAnTElMWScsIDEpOyBlbmQ7IGJlZ2luIGRlbGV0ZSBmcm9tIGFrX2xvYWRlcl90ZW1wOyBpbnNlcnQgaW50byBha19sb2FkZXJfdGVtcCBWQUxVRVMgKDEwLCAnTElMWScsIDEpOyBlbmQ7IGJlZ2luIGRlbGV0ZSBmcm9tIGFrX2xvYWRlcl90ZW1wOyBpbnNlcnQgaW50byBha19sb2FkZXJfdGVtcCBWQUxVRVMgKDExLCAnTElMWScsIDEpOyBlbmQ7IGJlZ2luIGRlbGV0ZSBmcm9tIGFrX2xvYWRlcl90ZW1wOyBpbnNlcnQgaW50byBha19sb2FkZXJfdGVtcCBWQUxVRVMgKDEyLCAnTElMWScsIDEpOyBlbmQ7IGJlZ2luIGRlbGV0ZSBmcm9tIGFrX2xvYWRlcl90ZW1wOyBpbnNlcnQgaW50byBha19sb2FkZXJfdGVtcCBWQUxVRVMgKDEzLCAnTElMWScsIDEpOyBlbmQ7ICBlbmQ7","type":"text"},{"key":"p_base64","value":"Y","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/statestep","host":["{{base_servlet_url}}"],"path":["statestep"]}},"response":[],"uid":"2333627-7a7f7f35-0a61-47df-8705-9bbd83fe6e63"},{"name":"ExecuteState-Base64","id":"400348c2-96ef-417b-9dee-ed0ba8f5ce2a","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","value":"application/x-www-form-urlencoded","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_session","value":"{{block_session_id}}","type":"text"},{"key":"p_custom_select","value":"c2VsZWN0ICogZnJvbSBha19sb2FkZXJfdGVtcA==","type":"text"},{"key":"p_base64","value":"Y","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/executestate","host":["{{base_servlet_url}}"],"path":["executestate"]}},"response":[],"uid":"2333627-400348c2-96ef-417b-9dee-ed0ba8f5ce2a"}],"id":"504e7fdc-f107-483c-972f-71811d397c28","uid":"2333627-504e7fdc-f107-483c-972f-71811d397c28"},{"name":"LoginViaEBSUrl","event":[{"listen":"test","script":{"id":"a871faea-295a-41df-a675-4f7b81380083","exec":[""],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"f965fec5-fbe4-49fc-ae28-93b3316e9fd4","exec":[""],"type":"text/javascript"}}],"id":"3f30bc71-3760-40a9-ac60-f8d6a8c9c482","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Content-Type","value":"application/x-www-form-urlencoded"}],"url":{"raw":"{{url_login}}","host":["{{url_login}}"]}},"response":[],"uid":"2333627-3f30bc71-3760-40a9-ac60-f8d6a8c9c482"},{"name":"setContext","id":"2553d8e3-c28b-45d7-a3d1-6fb686e4600c","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","value":"application/x-www-form-urlencoded","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_rid","value":"{{p_rid}}","type":"text"},{"key":"p_aid","value":"{{p_aid}}","type":"text"},{"key":"p_orgid","value":"{{p_orgid}}","type":"text"},{"key":"p_sec_grp_id","value":"0","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/setContext","host":["{{base_servlet_url}}"],"path":["setContext"]}},"response":[],"uid":"2333627-2553d8e3-c28b-45d7-a3d1-6fb686e4600c"},{"name":"runSql","event":[{"listen":"prerequest","script":{"id":"8e1b892b-d0e7-4be3-8fab-7f71c2705e7d","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"925e0b96-ce82-4a08-a97c-237b3645f243","exec":["tests[\"Status code is 200\"] = responseCode.code === 200;","","","","var jsonObject = xml2Json(responseBody);","console.log(jsonObject);","console.log(JSON.stringify(jsonObject));","","pm.test(\"Body matches string\", function () {","    pm.expect(pm.response.text()).to.include(\"<NLS_NUMERIC_CHARACTERS>.,</NLS_NUMERIC_CHARACTERS>\");","    pm.expect(pm.response.text()).to.include(\"<USER_NAME>DEFAULTLANG</USER_NAME>\");","});"],"type":"text/javascript"}}],"id":"e74d6142-4603-400d-b74a-df8c2831af85","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_sql","value":"select Xreversed_orig_txn_reference from pa_transaction_interface where rownum=1","type":"text"},{"key":"p_init","value":"begin\n delete from ak_loader_temp;\n  INSERT INTO ak_loader_temp(TBL_INDEX, LINE_CONTENT) VALUES (1, 'test run sql statement from postman'); \nend;","type":"text"},{"key":"p_sessionid","value":"1845430680","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/sql","host":["{{base_servlet_url}}"],"path":["sql"]}},"response":[],"uid":"2333627-e74d6142-4603-400d-b74a-df8c2831af85"},{"name":"runPLSQLBlock","event":[{"listen":"prerequest","script":{"id":"8e1b892b-d0e7-4be3-8fab-7f71c2705e7d","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"925e0b96-ce82-4a08-a97c-237b3645f243","exec":[""],"type":"text/javascript"}}],"id":"87ff01fd-0cfa-4d69-b43b-b3016b36ba4e","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_block","value":"begin\n delete from ak_loader_temp;\n  INSERT INTO ak_loader_temp(TBL_INDEX, LINE_CONTENT) VALUES (1, 'test run plsql block from postman'); \nend;","type":"text"},{"key":"p_custom_select","value":"select TBL_INDEX, LINE_CONTENT from ak_loader_temp","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/block","host":["{{base_servlet_url}}"],"path":["block"]}},"response":[],"uid":"2333627-87ff01fd-0cfa-4d69-b43b-b3016b36ba4e"},{"name":"ConcFeedBack","id":"8c2304ec-93b6-4cf3-aebb-84b19f48d30a","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_request_id","value":"7625699","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/ConcFeedback","host":["{{base_servlet_url}}"],"path":["ConcFeedback"]}},"response":[],"uid":"2333627-8c2304ec-93b6-4cf3-aebb-84b19f48d30a"},{"name":"logout","id":"b1691e4f-2fe7-4b53-b52c-9eb7cd05981b","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[],"url":{"raw":"{{url_logout}}","host":["{{url_logout}}"]}},"response":[],"uid":"2333627-b1691e4f-2fe7-4b53-b52c-9eb7cd05981b"},{"name":"LoginViaServlet","id":"d05980ee-167a-433d-bbec-604c770be8fb","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","value":"application/x-www-form-urlencoded","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_username","value":"{{globaluser}}","type":"text"},{"key":"p_password","value":"{{password}}","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/login","host":["{{base_servlet_url}}"],"path":["login"]}},"response":[],"uid":"2333627-d05980ee-167a-433d-bbec-604c770be8fb"},{"name":"StateSteps","event":[{"listen":"prerequest","script":{"id":"8972fa11-8f10-4958-a70f-029a4f586806","exec":[" request = {\r","                //url: pm.environment.get(\"baseurl\") + \"m4aServlet/sql\",\r","\r","                url: pm.environment.get(\"urlprefix\") + pm.environment.get(\"hostname\") + \".more4apps.com:\" + pm.environment.get(\"port\") +  \"/OA_HTML/m4aServlet/sql\",\r","                method: \"POST\",\r","                header: {'Content-Type': 'application/x-www-form-urlencoded'},\r","                body: {\r","                    mode: 'urlencoded',\r","          urlencoded: [{key: \"p_sql\", value: \"SELECT ad_sessions_s.nextval a from dual\", disabled: false}]}\r"," }\r"," \r"," pm.sendRequest(request, function (err, res) {\r","     var jsonResponse = xml2Json(res.text());\r","     console.log (jsonResponse.ROWSET.ROW.A);\r","        pm.environment.set(\"block_session_id\", jsonResponse.ROWSET.ROW.A);\r","        console.log ('block_session_id===' + pm.environment.get(\"block_session_id\"));\r"," })\r"," "],"type":"text/javascript"}},{"listen":"test","script":{"id":"823d6e65-66bf-40f8-8c2f-1c08ac3aa716","exec":["//console.log('body===' + JSON.stringify( xml2Json(responseBody).ROWSET.ROW.DONE));",""],"type":"text/javascript"}}],"id":"395ca7d2-3480-470f-9125-b5fb6b92c6d1","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","value":"application/x-www-form-urlencoded","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_session","value":"{{block_session_id}}","type":"text"},{"key":"p_block","value":"begin begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (8, 'LILY', 1); end; begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (9, 'LILY', 1); end; begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (10, 'LILY', 1); end; begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (11, 'LILY', 1); end; begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (12, 'LILY', 1); end; begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (13, 'LILY', 1); end;  end;","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/statestep","host":["{{base_servlet_url}}"],"path":["statestep"]}},"response":[],"uid":"2333627-395ca7d2-3480-470f-9125-b5fb6b92c6d1"},{"name":"ExecuteState","id":"d6f75253-2f1e-49f8-9ebb-ba93a576b0c8","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","value":"application/x-www-form-urlencoded","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_session","value":"{{block_session_id}}","type":"text"},{"key":"p_custom_select","value":"select * from ak_loader_temp","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/executeState","host":["{{base_servlet_url}}"],"path":["executeState"]}},"response":[],"uid":"2333627-d6f75253-2f1e-49f8-9ebb-ba93a576b0c8"},{"name":"FileAttachment","event":[{"listen":"prerequest","script":{"id":"50d82a12-b5a6-4ad0-b870-4bfe494ced86","exec":["pm.environment.set(\"pk1_value\", \"513594\");","pm.environment.set(\"entity_name\", \"AP_INVOICES\")","","var sql = \"SELECT \" +","            //\"   att.datatype_name, st.short_text, fd.file_name, 'Long Text' \" +","            \" count(*) count \" +","            \" FROM fnd_attached_docs_form_vl att, \" +","            \"   FND_DOCUMENTS_SHORT_TEXT st,\" +","            \"   FND_DOCUMENTS_LONG_TEXT lt,\" +","            \"   FND_DOCUMENTS_VL fd\" +","            \" WHERE att.entity_name = '\" + pm.environment.get(\"entity_name\")  +\"' \" +","            //Change this function name based on the wizards","            \" AND att.function_name = 'APXINWKB' \" +","            \" AND att.media_id      = st.media_id(+) \" +","            \" AND att.media_id      = lt.media_id(+) \" +","            \" AND att.document_id   = fd.document_id \" +","            \" and att.pk1_value = '\" + pm.environment.get(\"pk1_value\") + \"'\";","            ","pm.environment.set(\"countSql\", sql);","request = {","                url: pm.variables.get(\"urlprefix\") + pm.environment.get(\"hostname\") + \".more4apps.com:\" + pm.variables.get(\"port\") +  \"/OA_HTML/m4aServlet/sql\",","                method: \"POST\",","                header: {'Content-Type': 'application/x-www-form-urlencoded'},","                body: {","                    mode: 'urlencoded',","          urlencoded: [{key: \"p_sql\", value: pm.environment.get('countSql'), disabled: false}]}"," }","  pm.sendRequest(request, function (err, res) {","     var jsonResponse = xml2Json(res.text());","     console.log (jsonResponse.ROWSET.ROW.A);","        pm.environment.set(\"beforeAttCount\", jsonResponse.ROWSET.ROW.COUNT);","        console.log ('beforeAttCount===' + pm.environment.get(\"beforeAttCount\"));"," })"],"type":"text/javascript"}},{"listen":"test","script":{"id":"f17372cd-2ff2-44a2-abe3-64588c69bbcc","exec":["\r","request = {\r","                url: pm.variables.get(\"urlprefix\") + pm.environment.get(\"hostname\") + \".more4apps.com:\" + pm.variables.get(\"port\") +  \"/OA_HTML/m4aServlet/sql\",\r","                method: \"POST\",\r","                header: {'Content-Type': 'application/x-www-form-urlencoded'},\r","                body: {\r","                    mode: 'urlencoded',\r","          urlencoded: [{key: \"p_sql\", value: pm.environment.get('countSql'), disabled: false}]}\r"," }\r"," \r"," pm.sendRequest(request, function (err, res) {\r","     var jsonResponse = xml2Json(res.text());\r","     console.log (jsonResponse.ROWSET.ROW.A);\r","        pm.environment.set(\"afterAttCount\", jsonResponse.ROWSET.ROW.COUNT);\r","        console.log ('afterAttCount===' + pm.environment.get(\"afterAttCount\"));\r","        pm.test(\"attachment count should be increased by 1\", function () {\r","            pm.expect(parseInt(pm.environment.get('beforeAttCount')) + 1 ).to.eql(parseInt(pm.environment.get('afterAttCount')));\r","        });\r","})"],"type":"text/javascript"}}],"id":"2c64d9aa-79bd-4b53-913b-0ddfb5e9d17f","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"multipart/form-data; boundary=---------------------------0123456789012","type":"text"}],"body":{"mode":"formdata","formdata":[{"key":"entityname","value":"{{entity_name}}","description":"Change entity name in the Pre-request Script based on the wizards","type":"text"},{"key":"category","value":"1","type":"text"},{"key":"description","value":"I am from post man, first time","type":"text"},{"key":"pk1value","value":"{{pk1_value}}","description":"Invoice ID. Change this number in the Pre-request Script","type":"text"},{"key":"pk2value","value":"","type":"text"},{"key":"pk3value","value":"","type":"text"},{"key":"datatype","value":"","type":"text"},{"key":"module","value":"","type":"text"},{"key":"action","value":"","type":"text"},{"key":"thefile","description":"Change this file to your local one","type":"file","src":"/C:/Users/Lily/Desktop/fusion.xml"},{"key":"submit","value":"Submit","type":"text"}]},"url":{"raw":"{{base_servlet_url}}/uploadfile","host":["{{base_servlet_url}}"],"path":["uploadfile"]}},"response":[],"uid":"2333627-2c64d9aa-79bd-4b53-913b-0ddfb5e9d17f"}],"id":"d536acfb-378a-4641-8ba0-ebf8b8ca4930","uid":"2333627-d536acfb-378a-4641-8ba0-ebf8b8ca4930"},{"name":"R11","item":[{"name":"Base64","item":[{"name":"runSql-Base64","event":[{"listen":"prerequest","script":{"id":"8e1b892b-d0e7-4be3-8fab-7f71c2705e7d","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"925e0b96-ce82-4a08-a97c-237b3645f243","exec":["tests[\"Status code is 200\"] = responseCode.code === 200;","","","","var jsonObject = xml2Json(responseBody);","console.log(jsonObject);","console.log(JSON.stringify(jsonObject));","","pm.test(\"Body matches string\", function () {","    pm.expect(pm.response.text()).to.include(\"<NLS_NUMERIC_CHARACTERS>.,</NLS_NUMERIC_CHARACTERS>\");","    pm.expect(pm.response.text()).to.include(\"<USER_NAME>DEFAULTLANG</USER_NAME>\");","});"],"type":"text/javascript"}}],"id":"b91f66bb-2b7b-4762-8600-a08236fd051b","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_sql","value":"c2VsZWN0IFRCTF9JTkRFWCwgTElORV9DT05URU5UIGZyb20gYWtfbG9hZGVyX3RlbXA==","type":"text"},{"key":"p_init","value":"YmVnaW4NCiBkZWxldGUgZnJvbSBha19sb2FkZXJfdGVtcDsNCiAgSU5TRVJUIElOVE8gYWtfbG9hZGVyX3RlbXAoVEJMX0lOREVYLCBMSU5FX0NPTlRFTlQpIFZBTFVFUyAoMSwgJ3Rlc3QgcnVuIHNxbCBzdGF0ZW1lbnQgZnJvbSBwb3N0bWFuJyk7IA0KZW5kOw==","type":"text"},{"key":"p_sessionid","value":"{{sessionid}}","type":"text"},{"key":"p_base64","value":"Y","type":"text"}]},"url":{"raw":"{{base_servlet_urlR11}}.generate_xml","host":["{{base_servlet_urlR11}}","generate_xml"]}},"response":[],"uid":"2333627-b91f66bb-2b7b-4762-8600-a08236fd051b"},{"name":"runPLSQLBlock-Base64","event":[{"listen":"prerequest","script":{"id":"8e1b892b-d0e7-4be3-8fab-7f71c2705e7d","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"925e0b96-ce82-4a08-a97c-237b3645f243","exec":[""],"type":"text/javascript"}}],"id":"d21bd943-af52-4ae8-a192-cd908ff9b1d8","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_block","value":"YmVnaW4NCiBkZWxldGUgZnJvbSBha19sb2FkZXJfdGVtcDsNCiAgSU5TRVJUIElOVE8gYWtfbG9hZGVyX3RlbXAoVEJMX0lOREVYLCBMSU5FX0NPTlRFTlQpIFZBTFVFUyAoMSwgJ3Rlc3QgcnVuIHBsc3FsIGJsb2NrIGZyb20gcG9zdG1hbicpOyANCmVuZDs=","type":"text"},{"key":"p_custom_select","value":"c2VsZWN0IFRCTF9JTkRFWCwgTElORV9DT05URU5UIGZyb20gYWtfbG9hZGVyX3RlbXA=","type":"text"},{"key":"p_sessionid","value":"{{sessionid}}","type":"text"},{"key":"p_base64","value":"Y","type":"text"}]},"url":{"raw":"{{base_servlet_urlR11}}.process_block","host":["{{base_servlet_urlR11}}","process_block"]}},"response":[],"uid":"2333627-d21bd943-af52-4ae8-a192-cd908ff9b1d8"},{"name":"StateSteps-Base64","event":[{"listen":"prerequest","script":{"id":"8972fa11-8f10-4958-a70f-029a4f586806","exec":[" request = {\r","                //url: pm.environment.get(\"baseurl\") + \"m4aServlet/sql\",\r","\r","                url: pm.globals.get(\"urlprefix\") + pm.environment.get(\"hostname\") + \".more4apps.com:\" + pm.environment.get(\"port\") + \"/pls/\" + pm.environment.get(\"sid\") + \"/m4aps_xml.generate_xml\",\r","                method: \"POST\",\r","                header: {'Content-Type': 'application/x-www-form-urlencoded'},\r","                body: {\r","                    mode: 'urlencoded',\r","          urlencoded: [{key: \"p_sql\", value: \"SELECT ad_sessions_s.nextval a from dual\", disabled: false},{key: \"p_sessionid\", value: pm.environment.get(\"sessionid\")}]}\r"," }\r"," \r"," pm.sendRequest(request, function (err, res) {\r","     var jsonResponse = xml2Json(res.text());\r","     console.log (jsonResponse.ROWSET.ROW.A);\r","        pm.environment.set(\"block_session_id\", jsonResponse.ROWSET.ROW.A);\r","        console.log ('block_session_id===' + pm.environment.get(\"block_session_id\"));\r"," })\r"," "],"type":"text/javascript"}},{"listen":"test","script":{"id":"823d6e65-66bf-40f8-8c2f-1c08ac3aa716","exec":["//console.log('body===' + JSON.stringify( xml2Json(responseBody).ROWSET.ROW.DONE));",""],"type":"text/javascript"}}],"id":"02c8e061-a470-4928-bc80-0c89dae06894","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","type":"text","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_session","value":"{{block_session_id}}","type":"text"},{"key":"p_text","value":"YmVnaW4gYmVnaW4gZGVsZXRlIGZyb20gYWtfbG9hZGVyX3RlbXA7IGluc2VydCBpbnRvIGFrX2xvYWRlcl90ZW1wIFZBTFVFUyAoOCwgJ0xJTFknLCAxKTsgZW5kOyBiZWdpbiBkZWxldGUgZnJvbSBha19sb2FkZXJfdGVtcDsgaW5zZXJ0IGludG8gYWtfbG9hZGVyX3RlbXAgVkFMVUVTICg5LCAnTElMWScsIDEpOyBlbmQ7IGJlZ2luIGRlbGV0ZSBmcm9tIGFrX2xvYWRlcl90ZW1wOyBpbnNlcnQgaW50byBha19sb2FkZXJfdGVtcCBWQUxVRVMgKDEwLCAnTElMWScsIDEpOyBlbmQ7IGJlZ2luIGRlbGV0ZSBmcm9tIGFrX2xvYWRlcl90ZW1wOyBpbnNlcnQgaW50byBha19sb2FkZXJfdGVtcCBWQUxVRVMgKDExLCAnTElMWScsIDEpOyBlbmQ7IGJlZ2luIGRlbGV0ZSBmcm9tIGFrX2xvYWRlcl90ZW1wOyBpbnNlcnQgaW50byBha19sb2FkZXJfdGVtcCBWQUxVRVMgKDEyLCAnTElMWScsIDEpOyBlbmQ7IGJlZ2luIGRlbGV0ZSBmcm9tIGFrX2xvYWRlcl90ZW1wOyBpbnNlcnQgaW50byBha19sb2FkZXJfdGVtcCBWQUxVRVMgKDEzLCAnTElMWScsIDEpOyBlbmQ7ICBlbmQ7","type":"text"},{"key":"p_base64","value":"Y","type":"text"},{"key":"p_sequence","value":"0","type":"text"}]},"url":{"raw":"{{base_servlet_urlR11}}.state_step","host":["{{base_servlet_urlR11}}","state_step"]}},"response":[],"uid":"2333627-02c8e061-a470-4928-bc80-0c89dae06894"},{"name":"ExecuteState-Base64","id":"a663fd60-850b-4dfe-8d22-6ad7b6d9e2da","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","type":"text","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_session","value":"{{block_session_id}}","type":"text"},{"key":"p_custom_select","value":"c2VsZWN0ICogZnJvbSBha19sb2FkZXJfdGVtcA==","type":"text"},{"key":"p_base64","value":"Y","type":"text"},{"key":"p_sessionid","value":"{{sessionid}}","type":"text"}]},"url":{"raw":"{{base_servlet_urlR11}}.execute_state","host":["{{base_servlet_urlR11}}","execute_state"]}},"response":[],"uid":"2333627-a663fd60-850b-4dfe-8d22-6ad7b6d9e2da"}],"id":"a6d4f018-93b5-4d60-899b-ada88735bd20","uid":"2333627-a6d4f018-93b5-4d60-899b-ada88735bd20"},{"name":"LoginViaM4APackage","event":[{"listen":"test","script":{"id":"971d7810-9335-492d-a2dc-dbed272614c0","exec":["var json = pm.response.headers.toJSON()","for(var i = 0; i < json.length; i++) {","    var obj = json[i];","    if(obj.value.includes(\"not found for\"))","    {","        var cookie = obj.value.split(' ');","        pm.environment.set(\"sessionid\", cookie[cookie.length -1]);","        console.log(pm.environment.get(\"sessionid\"));","    }","}"],"type":"text/javascript"}}],"id":"30d0653d-ff57-4f1f-bbc0-7f8c23feba6f","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","type":"text","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_username","value":"{{globaluser}}","type":"text"},{"key":"p_password","value":"{{password}}","type":"text"}]},"url":{"raw":"{{url_loginR11}}","host":["{{url_loginR11}}"]}},"response":[],"uid":"2333627-30d0653d-ff57-4f1f-bbc0-7f8c23feba6f"},{"name":"runSql","event":[{"listen":"prerequest","script":{"id":"8e1b892b-d0e7-4be3-8fab-7f71c2705e7d","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"925e0b96-ce82-4a08-a97c-237b3645f243","exec":["tests[\"Status code is 200\"] = responseCode.code === 200;","","","","var jsonObject = xml2Json(responseBody);","console.log(jsonObject);","console.log(JSON.stringify(jsonObject));","","pm.test(\"Body matches string\", function () {","    pm.expect(pm.response.text()).to.include(\"<NLS_NUMERIC_CHARACTERS>.,</NLS_NUMERIC_CHARACTERS>\");","    pm.expect(pm.response.text()).to.include(\"<USER_NAME>DEFAULTLANG</USER_NAME>\");","});"],"type":"text/javascript"}}],"id":"52d595bb-50f1-4478-a682-93d9d15b4fcd","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_sql","value":"select TBL_INDEX, LINE_CONTENT from ak_loader_temp","type":"text"},{"key":"p_init","value":"begin\n delete from ak_loader_temp;\n  INSERT INTO ak_loader_temp(TBL_INDEX, LINE_CONTENT) VALUES (1, 'test run sql statement from postman'); \nend;","type":"text"},{"key":"p_sessionid","value":"{{sessionid}}","type":"text"}]},"url":{"raw":"{{base_servlet_urlR11}}.generate_xml","host":["{{base_servlet_urlR11}}","generate_xml"]}},"response":[],"uid":"2333627-52d595bb-50f1-4478-a682-93d9d15b4fcd"},{"name":"runPLSQLBlock","event":[{"listen":"prerequest","script":{"id":"8e1b892b-d0e7-4be3-8fab-7f71c2705e7d","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"925e0b96-ce82-4a08-a97c-237b3645f243","exec":[""],"type":"text/javascript"}}],"id":"3cdecf3c-2bb7-460c-8261-4693f3798cb0","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_block","value":"begin\n delete from ak_loader_temp;\n  INSERT INTO ak_loader_temp(TBL_INDEX, LINE_CONTENT) VALUES (1, 'test run plsql block from postman'); \nend;","type":"text"},{"key":"p_custom_select","value":"select TBL_INDEX, LINE_CONTENT from ak_loader_temp","type":"text"},{"key":"p_sessionid","value":"{{sessionid}}","type":"text"},{"key":"p_base64","value":"N","type":"text"}]},"url":{"raw":"{{base_servlet_urlR11}}.process_block","host":["{{base_servlet_urlR11}}","process_block"]}},"response":[],"uid":"2333627-3cdecf3c-2bb7-460c-8261-4693f3798cb0"},{"name":"StateSteps","event":[{"listen":"prerequest","script":{"id":"8972fa11-8f10-4958-a70f-029a4f586806","exec":[" request = {\r","                //url: pm.environment.get(\"baseurl\") + \"m4aServlet/sql\",\r","\r","                url: pm.globals.get(\"urlprefix\") + pm.environment.get(\"hostname\") + \".more4apps.com:\" + pm.environment.get(\"port\") + \"/pls/\" + pm.environment.get(\"sid\") + \"/m4aps_xml.generate_xml\",\r","                method: \"POST\",\r","                header: {'Content-Type': 'application/x-www-form-urlencoded'},\r","                body: {\r","                    mode: 'urlencoded',\r","          urlencoded: [{key: \"p_sql\", value: \"SELECT ad_sessions_s.nextval a from dual\", disabled: false},{key: \"p_sessionid\", value: pm.environment.get(\"sessionid\")}]}\r"," }\r"," \r"," pm.sendRequest(request, function (err, res) {\r","     var jsonResponse = xml2Json(res.text());\r","     console.log (jsonResponse.ROWSET.ROW.A);\r","        pm.environment.set(\"block_session_id\", jsonResponse.ROWSET.ROW.A);\r","        console.log ('block_session_id===' + pm.environment.get(\"block_session_id\"));\r"," })\r"," "],"type":"text/javascript"}},{"listen":"test","script":{"id":"823d6e65-66bf-40f8-8c2f-1c08ac3aa716","exec":["//console.log('body===' + JSON.stringify( xml2Json(responseBody).ROWSET.ROW.DONE));",""],"type":"text/javascript"}}],"id":"c9700d22-5500-4674-969b-54fc91869f22","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","type":"text","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_session","value":"{{block_session_id}}","type":"text"},{"key":"p_text","value":"begin begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (8, 'LILY', 1); end; begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (9, 'LILY', 1); end; begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (10, 'LILY', 1); end; begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (11, 'LILY', 1); end; begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (12, 'LILY', 1); end; begin delete from ak_loader_temp; insert into ak_loader_temp VALUES (13, 'LILY', 1); end;  end;","type":"text"},{"key":"p_sequence","value":"0","type":"text"}]},"url":{"raw":"{{base_servlet_urlR11}}.state_step","host":["{{base_servlet_urlR11}}","state_step"]}},"response":[],"uid":"2333627-c9700d22-5500-4674-969b-54fc91869f22"},{"name":"ExecuteState","id":"cb05798a-470e-4cc5-a2d8-402cd1245f1e","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","type":"text","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"p_session","value":"{{block_session_id}}","type":"text"},{"key":"p_custom_select","value":"select * from ak_loader_temp","type":"text"},{"key":"p_sessionid","value":"{{sessionid}}","type":"text"}]},"url":{"raw":"{{base_servlet_urlR11}}.execute_state","host":["{{base_servlet_urlR11}}","execute_state"]}},"response":[],"uid":"2333627-cb05798a-470e-4cc5-a2d8-402cd1245f1e"},{"name":"FileAttachment","event":[{"listen":"prerequest","script":{"id":"50d82a12-b5a6-4ad0-b870-4bfe494ced86","exec":["pm.environment.set(\"pk1_value\", \"12911\");\r","pm.environment.set(\"entity_name\", \"AP_INVOICES\")\r","\r","var sql = \"SELECT \" +\r","            //\"   att.datatype_name, st.short_text, fd.file_name, 'Long Text' \" +\r","            \" count(*) count \" +\r","            \" FROM fnd_attached_docs_form_vl att, \" +\r","            \"   FND_DOCUMENTS_SHORT_TEXT st,\" +\r","            \"   FND_DOCUMENTS_LONG_TEXT lt,\" +\r","            \"   FND_DOCUMENTS_VL fd\" +\r","            \" WHERE att.entity_name = '\" + pm.environment.get(\"entity_name\")  +\"' \" +\r","            //Change this function name based on the wizards\r","            \" AND att.function_name = 'APXINWKB' \" +\r","            \" AND att.media_id      = st.media_id(+) \" +\r","            \" AND att.media_id      = lt.media_id(+) \" +\r","            \" AND att.document_id   = fd.document_id \" +\r","            \" and att.pk1_value = '\" + pm.environment.get(\"pk1_value\") + \"'\";\r","pm.environment.set(\"countSql\", sql);\r","\r"," var sqlRequest = {\r","                url: pm.variables.get(\"urlprefix\") + pm.environment.get(\"hostname\") + \".more4apps.com:\" + pm.variables.get(\"port\") + \"/pls/\" + pm.variables.get(\"sid\") +  \"/m4aps_xml.generate_xml\",\r","                method: \"POST\",\r","                header: {'Content-Type': 'application/x-www-form-urlencoded'},\r","                body: {\r","                    mode: 'urlencoded',\r","          urlencoded: [{key: \"p_sql\", value: pm.environment.get('countSql'), disabled: false}, {key: \"p_sessionid\", value: pm.variables.get(\"sessionid\"), disabled: false}]}\r"," }\r"," \r"," pm.environment.set(\"sqlRequest\", sqlRequest);\r"," \r","  pm.sendRequest(pm.environment.get(\"sqlRequest\"), function (err, res) {\r","     var jsonResponse = xml2Json(res.text());\r","     console.log (jsonResponse.ROWSET.ROW.COUNT);\r","        pm.environment.set(\"beforeAttCount\", jsonResponse.ROWSET.ROW.COUNT);\r","        console.log ('beforeAttCount===' + pm.environment.get(\"beforeAttCount\"));\r"," })"],"type":"text/javascript"}},{"listen":"test","script":{"id":"f17372cd-2ff2-44a2-abe3-64588c69bbcc","exec":["\r","var postdata = \"p_procname=m4aps_xml.link_attachment\" +\r","               \"&p_p1_val=\" + pm.environment.get(\"entity_name\") +\r","               \"&p_p2_val=1\" + \r","               \"&p_p3_val=CloudMessages.xlsx\" + \r","               \"&p_p5_val=I am from postman\" +\r","               \"&p_p6_val=\" + pm.environment.get(\"pk1_value\") +\r","               \"&p_sessionid=\" + pm.environment.get(\"sessionid\") +\r","               \"&p_action=Creating Attachment Linkages\";\r","            \r","\r"," \r"," linkRequest = {\r","                url: pm.variables.get(\"urlprefix\") + pm.environment.get(\"hostname\") + \".more4apps.com:\" + pm.variables.get(\"port\") + \"/pls/\" + pm.variables.get(\"sid\") +  \"/m4aps_xml.process_procedure\",\r","                method: \"POST\",\r","                body: {\r","                        mode: 'raw',\r","                        raw:  postdata \r","                }\r","           \r"," }\r","\r","pm.sendRequest(linkRequest, function (err, res) {\r","        if (err) {\r","            console.log(err);\r","        }\r","        pm.sendRequest(pm.environment.get(\"sqlRequest\"), function (err, res) {\r","            var jsonResponse = xml2Json(res.text());\r","            console.log (jsonResponse.ROWSET.ROW.A);\r","            pm.environment.set(\"afterAttCount\", jsonResponse.ROWSET.ROW.COUNT);\r","            console.log ('afterAttCount===' + pm.environment.get(\"afterAttCount\"));\r","            pm.test(\"attachment count should be increased by 1\", function () {\r","            pm.expect(parseInt(pm.environment.get('beforeAttCount')) + 1 ).to.eql(parseInt(pm.environment.get('afterAttCount')));\r","        });\r","    })\r","})\r","\r"," \r",""],"type":"text/javascript"}}],"id":"c56daa74-2bb5-4783-8f92-fae8c3ac9014","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"formdata","formdata":[{"key":"FILE1","value":"M4APS-PIW","type":"text"},{"key":"FILE1","description":"Change this file to your local one","type":"file","src":"/C:/Users/Lily/Desktop/CloudMessages.xlsx"}]},"url":{"raw":"{{base_servlet_urlR11}}.load_file_attachment","host":["{{base_servlet_urlR11}}","load_file_attachment"]}},"response":[],"uid":"2333627-c56daa74-2bb5-4783-8f92-fae8c3ac9014"}],"id":"26149793-122f-4602-9eb7-b3aed9b4200e","uid":"2333627-26149793-122f-4602-9eb7-b3aed9b4200e"},{"name":"logon","id":"051d61f3-3f4d-4dfd-9bd5-dfbf8846eaba","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[],"url":{"raw":"http://tsunami.more4apps.com:8000/OA_HTML/m4aServlet/login?p_username=services&p_password=welcome","protocol":"http","host":["tsunami","more4apps","com"],"port":"8000","path":["OA_HTML","m4aServlet","login"],"query":[{"key":"p_username","value":"services","type":"text"},{"key":"p_password","value":"welcome","type":"text"}]}},"response":[],"uid":"2333627-051d61f3-3f4d-4dfd-9bd5-dfbf8846eaba"}],"event":[{"listen":"prerequest","script":{"id":"a5ba659c-b9a4-4026-9887-1f8e2aae380d","type":"text/javascript","exec":[""]}},{"listen":"test","script":{"id":"a06ec4fa-a1e2-4960-bcef-7a326080c310","type":"text/javascript","exec":[""]}}],"variable":[{"key":"globaluser","value":"services","type":"string"},{"key":"password","value":"welcome","type":"string"}]}}